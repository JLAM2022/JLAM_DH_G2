<!DOCTYPE html>
<html lang="es">
  <head>
    <%- include('../partials/head.ejs')%>
    <title>Editar Perfil - Terra Rossa</title>
  </head>
  <body>
    <header>
      <!-- seccion barra de navegacion -->
      <%- include('../partials/nav.ejs')%>
    </header>
    <main>
        <div class="user__main__container">
          <h1 class="cart__title">Editar Usuario</h1>
          <div class="user__data__columns">
            <div class="user__subgroup group__a">
              <h3>Perfil Actual</h2>
                <div class="edit__user">
                  <img src="/img/profileImages/<%= user.userImg%>" alt="profile picture">
                </div>
                <div class="edit__user">
                  <p><%= user.firstName%></p>
                  <p><%= user.userEmail%></p>
                </div>
            </div>
            <div class="user__subgroup group__b">
              <h3>Informaci칩n B치sica</h2>
              <form class="formulario" action="/users/edit-user/?_method=PUT" method="POST" enctype="multipart/form-data">
                <div class="input__group">
                  <input type="hidden" name="id" value="<%= user.userId%>"/>
                  <div class="input__section">
                    <label>Nombre</label>
                    <input type="text" name="nombre" value="<%= user.firstName%>"/>
                    <% if(locals.errors && errors.nombre) { %> 
                        <p class="form-warning"> <%= errors.nombre.msg %> </p>
                      <%}%> 
                  </div>
                  <div class="input__section">
                    <label>Apellido</label>
                    <input type="text" name="apellido" value="<%= user.lastName%>"/>
                    <% if(locals.errors && errors.apellido) { %> 
                        <p class="form-warning"> <%= errors.apellido.msg %> </p>
                      <%}%> 
                  </div>
                </div>
                <div class="input__group">
                  <div class="input__section">
                      <label>Direcci칩n</label>
                    <input type="text" name="direccion" value="<%= user.userAddress%>"/>
                    <% if(locals.errors && errors.direccion) { %> 
                        <p class="form-warning"> <%= errors.direccion.msg %> </p>
                      <%}%> 
                  </div>
                  <div class="input__section">
                    <div class="user__row">
                      <label>Piso</label> <p>(En caso de ser necesario)</p>
                    </div>
                    <input type="text" name="departamento" value="<%= user.userFloor%>"/>
                    <% if(locals.errors && errors.departamento) { %> 
                        <p class="form-warning"> <%= errors.departamento.msg %> </p>
                      <%}%> 
                  </div>
                </div>
                <div class="input__group">
                  <div class="input__section">
                    <label>Ciudad</label>
                    <select name="codigoPostal">
                      <option selected disabled>-- seleccione su ciudad --</option>
                      <% city.forEach(city => { %>
                        <% if (city.idCity == user.idCity) {%>
                          <option selected><%= city.cityName%></option>
                        <%}else {%>
                          <option><%= city.cityName%></option>
                        <% }%>
                      <% })%> 
                    </select>
                  </div>
                  <div class="input__section">
                    <label>Email</label> 
                    <input type="email" name="email" value="<%= user.userEmail%>"/>
                    <% if(locals.errors && errors.email) { %> 
                      <p class="form-warning"> <%= errors.email.msg %> </p>
                    <%}%> 
                  </div >
                </div>
                <div class="input__group">
                  <div class="input__section">
                    <label>Fecha de Nacimiento</label>
                    <input type="date" name="fechaNacimiento" value="<%= user.userBirthDate%>"/>
                    <% if(locals.errors && errors.fechaNacimiento) { %> 
                      <p class="form-warning"> <%= errors.fechaNacimiento.msg %> </p>
                    <%}%> 
                  </div>
                  <div class="input__section">
                    <label>Contrase침a</label>
                    <input type="password" name="password" value=""/>
                    <% if(locals.errors && errors.password) { %> 
                      <p class="form-warning"> <%= errors.password.msg %> </p>
                    <%}%> 
                  </div>
                </div>
                <div class="input__group">
                  <div class="input__section">
                    <label>Ingrese una imagen de perfil</label>
                      <input type="file" id="profileImageUser" name="<%= user.userImg%>"/>
                      <% if(locals.errors && errors.profileImage) { %> 
                        <p class="form-warning"> <%= errors.profileImage.msg %> </p>
                      <%}%> 
                  </div>
                </div>
                <div class="submit__container">
                  <a class="user__cancel" href="/">Cancelar</a>
                  <input class="user__submit" id="submit" type="submit" value="Guardar"/>
                </div>
              </form>
            </div>
          </div>
        </div>
    
    </main>
   <footer class="footer">
    <%- include('../partials/footer.ejs')%>
   </footer>
  </body>
  </html>
